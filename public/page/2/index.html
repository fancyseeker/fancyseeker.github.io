
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>FancySeeker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="FancySeeker">
<meta property="og:url" content="http://fancyseeker.github.io/page/2/index.html">
<meta property="og:site_name" content="FancySeeker">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FancySeeker">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="FancySeeker" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-img"></div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">FancySeeker</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Welcome, my friends.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <!-- <a id="main-nav-toggle" class="nav-icon"></a> -->
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="fancyseeker.github.io">
        </form>
      </div>
    </div>
	
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-ssh_connect" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
          <div class="article-meta">
            
            <a href="/2013/12/31/ssh_connect/" class="article-date">
  <time datetime="2013-12-31T09:24:47.000Z" itemprop="datePublished">2013-12-31</time>
</a>
            <p class="article-time">
                <a href="/2013/12/31/ssh_connect/" class="article-time">
  <time datetime="2013-12-31T09:24:47.000Z" itemprop="datePublished">17:24:47</time>
</a>

            </p>
          </div>
        
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/31/ssh_connect/">SSH配置-在Windows下远程登陆Linux服务器Shell</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
       <!--<h1>Background</h1>
<p>这几天需要在实验室空闲电脑上配置一个samba服务器用于共享文件, 而那台电脑所在座位上刚好来了一个人临时要在这边待几个星期, 因此无法直接在服务器前进行配置, 于是乎想到了利用SSH来远程登陆服务器进行操作. 其实说是远程, 也就隔了不到5米, 但是通过自己的电脑操控另一台电脑的感觉真的还是很美妙的. 想象一下此刻你正处于地球上不知道哪个地方, 然后通过庞大的互联网, 连接到了与你距离十万八千里的某台主机上进行操作, 想想还有点小激动呢.</p>
<hr>
<h1>系统环境</h1>
<p>服务器: CentOS 6.4 x86_64    OpenSSH<br>
SSH客户机: Windows 7 64bit    PuTTY</p>
<hr>
<h1>安装启动SSH服务</h1>
<p>在CentOS上查看是否安装了ssh相关的包.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[fancyseeker@localhost ~]$ rpm -qa | grep ssh</span><br><span class="line">openssh-<span class="number">5.3</span>p1-<span class="number">94</span>.el6.x86_64</span><br><span class="line">openssh-askpass-<span class="number">5.3</span>p1-<span class="number">94</span>.el6.x86_64</span><br><span class="line">libssh2-<span class="number">1.4</span>.<span class="number">2</span>-<span class="number">1</span>.el6.x86_64</span><br><span class="line">openssh-server-<span class="number">5.3</span>p1-<span class="number">94</span>.el6.x86_64</span><br><span class="line">openssh-clients-<span class="number">5.3</span>p1-<span class="number">94</span>.el6.x86_64</span><br><span class="line">openssh-ldap-<span class="number">5.3</span>p1-<span class="number">94</span>.el6.x86_64</span><br></pre></td></tr></table></figure>
<p>如果没有安装, 那么需要手动安装下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install openssh*</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>设置开机启动SSH服务</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># chkconfig sshd on</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>开启SSH服务</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># /etc/init.d/sshd start</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>查看SSH服务运行状态</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># /etc/init.d/sshd status</span><br></pre></td></tr></table></figure>
<hr>
<h1>配置SSH服务</h1>
<p>SSH服务配置 SSH服务的配置文件主要有2个, 分别为 <code>/etc/ssh/ssh_config</code> 以及 <code>/etc/ssh/sshd_config</code></p>
<h2 id="ssh-config配置文件">ssh_config配置文件</h2>
<p>这里我们先对<code>ssh_config</code>配置文件进行修改, 添加或修改如下几项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用RSA算法进行安全验证</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line"><span class="comment"># 关闭密码验证</span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line"><span class="comment"># 强制使用的SSH2</span></span><br><span class="line">Protocol <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>由于接下来我们会选用RSA算法来产生密钥对, 因此将<code>RSAAuthentication</code>设置成<code>yes</code>, <code>PasswordAuthentication</code>设置成<code>no</code>使得客户端无法通过不安全的账户密码方式登录, 增强安全性. <code>Protocol 2</code>设定强制使用SSH的第二版. 当然, 如果希望仅在某一个网段内进行SSH连接, 那么可以设置 <code>Host *</code>选项, 将<code>*</code>换成允许的网段, 例如<code>192.168.1.</code>代表IP地址为<code>192.168.1.x</code>的电脑可以进行SSH连接, 而其他IP地址的电脑则无法连接. 关于<code>ssh_config</code>文件的具体选项的解释如下所示<sup>[<a href="http://blog.lizhigang.net/archives/249" target="_blank" rel="external">1</a></sup></p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Host *</span><br><span class="line"><span class="preprocessor"># 选项“Host”只对能够匹配后面字串的计算机有效。“*”表示所有的计算机。</span></span><br><span class="line">ForwardAgent no</span><br><span class="line"><span class="preprocessor"># “ForwardAgent”设置连接是否经过验证代理（如果存在）转发给远程计算机。</span></span><br><span class="line">ForwardX11 no</span><br><span class="line"><span class="preprocessor"># “ForwardX11”设置X11连接是否被自动重定向到安全的通道和显示集（DISPLAY set）。</span></span><br><span class="line">RhostsAuthentication no</span><br><span class="line"><span class="preprocessor"># “RhostsAuthentication”设置是否使用基于rhosts的安全验证。</span></span><br><span class="line">RhostsRSAAuthentication no</span><br><span class="line"><span class="preprocessor"># “RhostsRSAAuthentication”设置是否使用用RSA算法的基于rhosts的安全验证。</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line"><span class="preprocessor"># “RSAAuthentication”设置是否使用RSA算法进行安全验证。</span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line"><span class="preprocessor"># “PasswordAuthentication”设置是否使用口令验证。</span></span><br><span class="line">FallBackToRsh no</span><br><span class="line"><span class="preprocessor"># “FallBackToRsh”设置如果用ssh连接出现错误是否自动使用rsh。</span></span><br><span class="line">UseRsh no</span><br><span class="line"><span class="preprocessor"># “UseRsh”设置是否在这台计算机上使用“rlogin/rsh”。</span></span><br><span class="line">BatchMode no</span><br><span class="line"><span class="preprocessor"># “BatchMode”如果设为“yes”，passphrase/password（交互式输入口令）的提示将被禁止。当不能交互式输入口令的时候，这个选项对脚本文件和批处理任务十分有用。</span></span><br><span class="line">CheckHostIP yes</span><br><span class="line"><span class="preprocessor"># “CheckHostIP”设置ssh是否查看连接到服务器的主机的IP地址以防止DNS欺骗。建议设置为“yes”。</span></span><br><span class="line">StrictHostKeyChecking no</span><br><span class="line"><span class="preprocessor"># “StrictHostKeyChecking”如果设置成“yes”，ssh就不会自动把计算机的密匙加入“$HOME/.ssh/known_hosts”文件，并且一旦计算机的密匙发生了变化，就拒绝连接。</span></span><br><span class="line">IdentityFile ~/.ssh/identity</span><br><span class="line"><span class="preprocessor"># “IdentityFile”设置从哪个文件读取用户的RSA安全验证标识。</span></span><br><span class="line">Port <span class="number">22</span></span><br><span class="line"><span class="preprocessor"># “Port”设置连接到远程主机的端口。</span></span><br><span class="line">Cipher blowfish</span><br><span class="line"><span class="preprocessor"># “Cipher”设置加密用的密码。</span></span><br><span class="line">EscapeChar ~</span><br><span class="line"><span class="preprocessor"># “EscapeChar”设置escape字符。</span></span><br></pre></td></tr></table></figure>
<h2 id="sshd-config配置文件">sshd_config配置文件</h2>
<p>在sshd_config文件中添加或修改如下选项</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">PermitRootLogin</span> <span class="built_in">no</span></span><br><span class="line">PermitEmptyPasswords <span class="built_in">no</span></span><br></pre></td></tr></table></figure>
<p>出于安全性的考虑, 我们不允许客户端直接用root账户进行登录, 故将<code>PermitRootLogin</code>设置成<code>no</code>(当然, 可以在登陆了其他用户后切换至root用户), 同时不允许空密码. <code>sshd_config</code>文件的其它具体选项的解释如下所示<sup>[<a href="http://blog.lizhigang.net/archives/249" target="_blank" rel="external">1</a></sup></p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Port <span class="number">22</span></span><br><span class="line"><span class="preprocessor"># “Port”设置sshd监听的端口号。</span></span><br><span class="line">ListenAddress <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line"><span class="preprocessor"># “ListenAddress”设置sshd服务器绑定的IP地址。</span></span><br><span class="line">HostKey /etc/ssh/ssh_host_key</span><br><span class="line"><span class="preprocessor"># “HostKey”设置包含计算机私人密匙的文件。</span></span><br><span class="line">ServerKeyBits <span class="number">1024</span></span><br><span class="line"><span class="preprocessor"># “ServerKeyBits”定义服务器密匙的位数。</span></span><br><span class="line">LoginGraceTime <span class="number">600</span></span><br><span class="line"><span class="preprocessor"># “LoginGraceTime”设置如果用户不能成功登录，在切断连接之前服务器需要等待的时间（以秒为单位）。</span></span><br><span class="line">KeyRegenerationInterval <span class="number">3600</span></span><br><span class="line"><span class="preprocessor"># “KeyRegenerationInterval”设置在多少秒之后自动重新生成服务器的密匙（如果使用密匙）。重新生成密匙是为了防止用盗用的密匙解密被截获的信息。</span></span><br><span class="line">PermitRootLogin no</span><br><span class="line"><span class="preprocessor"># “PermitRootLogin”设置root能不能用ssh登录。这个选项一定不要设成“yes”。</span></span><br><span class="line">IgnoreRhosts yes</span><br><span class="line"><span class="preprocessor"># “IgnoreRhosts”设置验证的时候是否使用“rhosts”和“shosts”文件。</span></span><br><span class="line">IgnoreUserKnownHosts yes</span><br><span class="line"><span class="preprocessor"># “IgnoreUserKnownHosts”设置ssh daemon是否在进行RhostsRSAAuthentication安全验证的时候忽略用户的“$HOME/.ssh/known_hosts”</span></span><br><span class="line">StrictModes yes</span><br><span class="line"><span class="preprocessor"># “StrictModes”设置ssh在接收登录请求之前是否检查用户家目录和rhosts文件的权限和所有权。这通常是必要的，因为新手经常会把自己的目录和文件设成任何人都有写权限。</span></span><br><span class="line">X11Forwarding no</span><br><span class="line"><span class="preprocessor"># “X11Forwarding”设置是否允许X11转发。</span></span><br><span class="line">PrintMotd yes</span><br><span class="line"><span class="preprocessor"># “PrintMotd”设置sshd是否在用户登录的时候显示“/etc/motd”中的信息。</span></span><br><span class="line">SyslogFacility AUTH</span><br><span class="line"><span class="preprocessor"># “SyslogFacility”设置在记录来自sshd的消息的时候，是否给出“facility code”。</span></span><br><span class="line">LogLevel INFO</span><br><span class="line"><span class="preprocessor"># “LogLevel”设置记录sshd日志消息的层次。INFO是一个好的选择。查看sshd的man帮助页，已获取更多的信息。</span></span><br><span class="line">RhostsAuthentication no</span><br><span class="line"><span class="preprocessor"># “RhostsAuthentication”设置只用rhosts或“/etc/hosts.equiv”进行安全验证是否已经足够了。</span></span><br><span class="line">RhostsRSAAuthentication no</span><br><span class="line"><span class="preprocessor"># “RhostsRSA”设置是否允许用rhosts或“/etc/hosts.equiv”加上RSA进行安全验证。</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line"><span class="preprocessor"># “RSAAuthentication”设置是否允许只有RSA安全验证。</span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line"><span class="preprocessor"># “PasswordAuthentication”设置是否允许口令验证。</span></span><br><span class="line">PermitEmptyPasswords no</span><br><span class="line"><span class="preprocessor"># “PermitEmptyPasswords”设置是否允许用口令为空的帐号登录。</span></span><br><span class="line">AllowUsers admin</span><br><span class="line"><span class="preprocessor"># “AllowUsers”的后面可以跟着任意的数量的用户名的匹配串（patterns）或user@host这样的匹配串，这些字符串用空格隔开。主机名可以是DNS名或IP地址。</span></span><br></pre></td></tr></table></figure>
<hr>
<h1>密钥对配置</h1>
<p>在上面的设置中, 我们已经禁止了用户通过提供账号密码这种不太安全的方式进行登录, 因此, 用户只能通过公钥认证这种方式登录. 公钥认证登录方式相对而言安全, 而且方便, 不要输入密码. 关于公钥认证的原理请看上一篇文章<a href="">&lt;SSH连接认证原理概述&gt;</a>. 接下来, 需要生成密钥对, 即一组配对的公钥<code>Public Key</code>和私钥<code>Private Key</code>. 登录一个普通用户, 利用<code>$ ssh-keygen -t rsa</code>命令为其生成密钥对, <code>-t rsa</code>开关代表利用RSA算法产生密钥对.</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[fancyseeker@localhost ~]$ who </span><br><span class="line">fancyseeker pts/<span class="number">0</span> <span class="number">2013</span>-<span class="number">12</span>-<span class="number">30</span> <span class="number">17</span>:<span class="number">49</span> (<span class="number">192.168</span>.<span class="number">1.9</span>)</span><br><span class="line">[fancyseeker@localhost ~]$ ssh-keygen -t rsa</span><br><span class="line">Generating <span class="keyword">public</span>/<span class="keyword">private</span> rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> which <span class="keyword">to</span> save the key (/home/fancyseeker/.ssh/id_rsa): <span class="comment">//此处设置私钥存放目录,直接回车即可,将私钥保存在~/.ssh/id_rsa</span></span><br><span class="line">Enter passphrase (<span class="keyword">empty</span> <span class="keyword">for</span> no passphrase): <span class="comment">//此处设置公钥认证密码,直接回车表示不设置</span></span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification <span class="keyword">has</span> been saved <span class="keyword">in</span> /home/fancyseeker/.ssh/id_rsa. <span class="comment">//私钥</span></span><br><span class="line">Your <span class="keyword">public</span> key <span class="keyword">has</span> been saved <span class="keyword">in</span> /home/fancyseeker/.ssh/id_rsa.pub. <span class="comment">//公钥</span></span><br><span class="line">The key fingerprint <span class="keyword">is</span>:</span><br><span class="line"><span class="number">9</span>b:f3:bf:f6:<span class="number">39</span>:<span class="number">70</span>:c9:<span class="number">66</span>:d2:<span class="number">1</span>c:<span class="number">99</span>:c6:<span class="number">71</span>:<span class="number">6</span>a:b8:a9 fancyseeker@localhost.localdomain</span><br><span class="line">The key<span class="string">'s randomart image is:</span><br><span class="line">+--[ RSA 2048]----+</span><br><span class="line">|                 |</span><br><span class="line">|              . .|</span><br><span class="line">|             o * |</span><br><span class="line">|            . O  |</span><br><span class="line">|        S    O o |</span><br><span class="line">|         o  = O  |</span><br><span class="line">|        +  . *   |</span><br><span class="line">|         oE . .. |</span><br><span class="line">|          .oooo. |</span><br><span class="line">+-----------------+</span></span><br></pre></td></tr></table></figure>
<p>注: 运行<code>ssh-keygen</code>命令并不需要切换至特定的用户 (比如你想要通过sample_user这个用户来进行ssh登陆, 但是并不一定要求说需要切换至sample_user来执行<code>ssh-keygen</code>这个命令), 同样的也不需要指定在服务器还是客户端执行, 执行<code>ssh-keygen</code>的目的仅仅是为了得到一个密钥对, 与谁来执行, 在哪执行没有特别的关系. 当然, 生成的密钥对会默认存放在当前用户的<code>~/.ssh</code>文件夹下, 因此如果用特定用户来执行<code>ssh-keygen</code>会省事很多. 在得到密钥对之后, 将公钥和私钥设置好权限之后放置在合适的目录下即可. 具体的权限和位置请看接下来的部分.</p>
<p>这时候, 可以查看下<code>~/.ssh</code>目录下生成的公钥和私钥文件.</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">[</span><span class="comment">fancyseeker@localhost</span> <span class="string">.</span><span class="comment">ssh</span><span class="title">]</span><span class="comment">$</span> <span class="comment">ll</span> <span class="comment">~/</span><span class="string">.</span><span class="comment">ssh</span></span><br><span class="line"><span class="literal">-</span><span class="comment">rw</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span> <span class="comment">1</span> <span class="comment">fancyseeker</span> <span class="comment">fancyseeker</span> <span class="comment">1679</span> <span class="comment">Dec</span> <span class="comment">31</span> <span class="comment">14:12</span> <span class="comment">id_rsa</span></span><br><span class="line"><span class="literal">-</span><span class="comment">rw</span><span class="literal">-</span><span class="comment">r</span><span class="literal">-</span><span class="literal">-</span><span class="comment">r</span><span class="literal">-</span><span class="literal">-</span> <span class="comment">1</span> <span class="comment">fancyseeker</span> <span class="comment">fancyseeker</span>  <span class="comment">410</span> <span class="comment">Dec</span> <span class="comment">31</span> <span class="comment">14:12</span> <span class="comment">id_rsa</span><span class="string">.</span><span class="comment">pub</span></span><br></pre></td></tr></table></figure>
<p>这里可以看到<code>ssh-keygen</code>命令生成了公钥 <strong><code>id_rsa.pub</code></strong> 和私钥 **<code>id_rsa</code>**文件.</p>
<p>接下来, 需要做的就是把公钥文件留在服务器特定用户的 <code>~/.ssh</code> 文件夹下, 而将私钥文件放置于客户端.</p>
<h2 id="公钥处理">公钥处理</h2>
<p>首先, 将公钥 <code>id_rsa.pub</code> 文件重命名为 **<code>authorized_keys</code>**放置于服务器端指定登陆用户的 <code>~/.ssh</code> 文件夹下.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[fancyseeker<span class="variable">@localhost</span> .ssh]<span class="variable">$ </span>cat ~<span class="regexp">/.ssh/id</span>_rsa.pub <span class="prompt">&gt;&gt; </span>~<span class="regexp">/.ssh/authorized</span>_keys</span><br></pre></td></tr></table></figure>
<p>这里有几点要说明下, 关于为什么要将公钥名称更改为<code>authorized_keys</code>, 这是因为ssh服务会在客户端发起连接请求的时候在对应用户家目录的<code>.ssh</code>文件夹下寻找 <code>authorized_keys</code> 文件, 并打开访问文件中包含的公钥. 除此之外, <code>authorized_keys</code> 文件中可以包含多个公钥, 因此上述的命令中用了<code>&gt;&gt;</code>指令将之前生成的公钥追加至<code>authorized_keys</code>文件的尾部.</p>
<p>为了使登陆更加安全, 我们需要将公钥的权限设置为只有所有者可读, 同时删除之前的 <code>id_rsa.pub</code> 文件, 即</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[fancyseeker<span class="variable">@localhost</span> .ssh]<span class="variable">$ </span>chmod <span class="number">400</span> ~<span class="regexp">/.ssh/authorized</span>_keys</span><br><span class="line">[fancyseeker<span class="variable">@localhost</span> .ssh]<span class="variable">$ </span>rm -f id_rsa.pub</span><br><span class="line">[fancyseeker<span class="variable">@localhost</span> .ssh]<span class="variable">$ </span>ll</span><br><span class="line">-r-------- <span class="number">1</span> fancyseeker fancyseeker  <span class="number">410</span> <span class="constant">Dec </span><span class="number">29</span> <span class="number">20</span><span class="symbol">:</span><span class="number">51</span> authorized_keys</span><br><span class="line">-rw------- <span class="number">1</span> fancyseeker fancyseeker <span class="number">1679</span> <span class="constant">Dec </span><span class="number">31</span> <span class="number">14</span><span class="symbol">:</span><span class="number">12</span> id_rsa</span><br></pre></td></tr></table></figure>
<p>至此, 服务器端的配置结束. 接下来介绍Windows客户端PuTTY的配置和使用.</p>
<hr>
<h1>Windows下使用PuTTY登陆</h1>
<p><a href="http://www.putty.org/" target="_blank" rel="external">PuTTY</a>是Windows环境下一个简单易用的SSH客户端软件.</p>
<p>首先, 我们需要利用一种安全的方式(可以用U盘, 移动硬盘之类的存储介质, 也可以使用scp(secure copy)协议进行安全传输), 将服务器端产生的私钥文件 <code>id_rsa</code> 移动到客户端上来.</p>
<h2 id="转换私钥格式">转换私钥格式</h2>
<p>由于服务器端产生的私钥文件<code>id_rsa</code>的格式PuTTY无法识别, 因此需要先利用<code>PuTTYgen</code>工具转换成PuTTY识别的格式.(PuTTYgen工具需要<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html" target="_blank" rel="external">此处</a>下载)</p>
<p>运行PuTTYgen工具, 点击 Load, 选择要转换的私钥文件.</p>
<p><img src="/img/ssh_connect/puttygen.jpg" alt="PuTTYgen"></p>
<p>找到之前存放私钥文件的地方.</p>
<p><img src="/img/ssh_connect/PuTTYgen_all.jpg" alt=""></p>
<p>这里需要将文件名后面的文件类型更改为All File(<em>.</em>)才能看到服务器端产生的私钥文件.</p>
<p><img src="/img/ssh_connect/PuTTYgen_pk.jpg" alt=""></p>
<p>此时, PuTTYgen会要求你输入passphrase口令, 该口令是之前在服务器端利用<code>ssh-keygen</code>生成密钥对时,由用户输入的一个口令, 如果为空, 直接回车即可.</p>
<p><img src="/img/ssh_connect/passphrase.jpg" alt=""></p>
<p>输入口令, 点击ok, PuTTYgen会提示私钥格式转换成功</p>
<p><img src="/img/ssh_connect/pksucc.jpg" alt=""></p>
<p>点击 Save private key 将转换成功后的 ppk 文件保存至自己想要的指定位置. 此时, 私钥的转换工作结束, 接下来配置PuTTY.</p>
<h2 id="导入私钥">导入私钥</h2>
<p>双击打开PuTTY, 在左侧的列表中找到<code>Connection-SSH-Auth</code>, 在右边的窗口中, 选择需要导入的私钥.</p>
<p><img src="/img/ssh_connect/PuTTYconfig.jpg" alt=""></p>
<p>然后找到刚才利用PuTTYgen转换得到的ppk私钥文件</p>
<p><img src="/img/ssh_connect/pkpos.jpg" alt=""></p>
<h2 id="配置会话session">配置会话Session</h2>
<p>之后点击左侧列表中的Session, 来配置SSH会话, 即连接的具体参数</p>
<p><img src="/img/ssh_connect/session.jpg" alt=""></p>
<p>此处需要配置服务器的IP地址, 以及要保存的连接名称(任意取), 设定完后点击右侧的 <code>Save</code> 按钮将连接保存, 这样下次就不需要设置而能快速访问了.</p>
<p>至此, SSH的服务器端和客户端的配置全部结束, 接下来是测试过程.</p>
<h2 id="测试登录">测试登录</h2>
<p>双击打开PuTTY, 选中之前我们保存的名为 Whatever you like 的连接, 点击<code>Open</code>, 发起SSH连接<br>
<img src="/img/ssh_connect/testPuTTY.jpg" alt=""><br>
我们会看到一个黑色的连接对话框, 在输入要登陆的用户名以及在生成密钥对时要求的passphrase后, 成功地登陆了远程服务器.</p>
<p><img src="/img/ssh_connect/sshlogin.jpg" alt=""></p>
<p>有几点需要在本文的最后稍微做下说明.</p>
<ol>
<li>SSH配置的关键在于首先需要先生成一个密钥对, 该密钥对是由哪个用户生成以及是在服务器端生成还是在客户端生成的都不重要, 重要的是最后这个密钥对中的公钥必须要在服务器端的特定用户家目录下的.ssh文件夹中,并命名为authorized_keys,而私钥则必须经由客户端转换后导入客户端软件,这样才能满足SSH连接的需求.</li>
<li>服务器端的公钥权限不对,无法被读取有可能导致在进行SSH登陆的时候被服务器端拒绝.</li>
<li>一个萝卜一个坑, 不同用户不可共同使用同一组密钥对, 否则可能导致登陆失败.</li>
<li>服务器之所以接受该用户利用SSH登陆是因为在服务器端的改用户家目录的.ssh文件夹下有公钥文件, 并且和发起请求客户端的私钥文件是配对的. 显然的, 如果发起请求的用户在服务器端的家目录.ssh文件夹下没有公钥文件, 那么便无法成功登陆.</li>
</ol>
<p>至此, 本文结束.</p>
-->
            
            
                <h1>Background</h1>
                
                <p class="article-more-link">
                    <a href="/2013/12/31/ssh_connect/#more">Read More</a>
                </p>
                
            
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://fancyseeker.github.io/2013/12/31/ssh_connect/" data-id="ci93spi2w0013fgdyq5xy6kxm" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="http://fancyseeker.github.io/2013/12/31/ssh_connect/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PuTTY/">PuTTY<span class="article-tag-list-count">1</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell<span class="article-tag-list-count">1</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssh/">ssh<span class="article-tag-list-count">2</span></a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-ssh_overview" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
          <div class="article-meta">
            
            <a href="/2013/12/30/ssh_overview/" class="article-date">
  <time datetime="2013-12-30T05:54:46.000Z" itemprop="datePublished">2013-12-30</time>
</a>
            <p class="article-time">
                <a href="/2013/12/30/ssh_overview/" class="article-time">
  <time datetime="2013-12-30T05:54:46.000Z" itemprop="datePublished">13:54:46</time>
</a>

            </p>
          </div>
        
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/30/ssh_overview/">SSH连接认证原理概述</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
       <!--<h1>SSH简要介绍</h1>
<p>SSH的英文全称为Secure Shell，是IETF（Internet Engineering Task Force）的Network Working Group所制定的一族协议，其目的是要在非安全网络上提供安全的远程登录和其他安全网络服务。<sup><a href="http://blog.csdn.net/oncoding/article/details/4365062" target="_blank" rel="external">[1]</a></sup>用于在主机之间建立起安全连接, 并加密传输内容, 以达到安全的远程访问, 操作以及数据传输的目的.</p>
<p>SSH主要有两个特点: 1. 安全性 2. 传输速度快</p>
<p>为什么要强调SSH的安全特性, 因为传统的网络服务程序，如 FTP、POP 和 Telnet 其本质上都是不安全的；因为它们在网络上用明文传送数据、用户帐号和用户口令，很容易受到中间人（man-in-the-middle）攻击方式的攻击。就是存在另一个人或者一台机器冒充真正的服务器接收用户传给服务器的数据，然后再冒充用户把数据传给真正的服务器。 而 SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。透过 SSH 可以对所有传输的数据进行加密，也能够防止 DNS 欺骗和 IP 欺骗。<sup><a href="http://biaobiaoqi.me/blog/2013/04/19/use-ssh/" target="_blank" rel="external">[2]</a></sup></p>
<p>SSH的传输速度快是因为SSH传输的数据都是经过压缩的, 自然传输速度快.</p>
<h1>SSH认证原理简述</h1>
<p>在介绍SSH具体的认证原理之前, 先简单的介绍下关于公钥和密钥加密的概念.所谓的公钥加密 (public-key cryptography)，或非对称密钥加密 (asymmetric key cryptography) 是一类广泛使用的加密算法。这类算法使用一对(pair)密钥即<strong>公钥 (public key)</strong> 和<strong>私钥 (private key)</strong>。 其中公钥可以随便分发，只用于加密 (encryption)，私钥则只由一人持有，只用于解密。通过公钥加密过的密文使用密钥可以轻松解密, 但根据公钥来猜测私钥却十分困难.</p>
<p>因此, 我们可以很容易的发现这么一个事实, 一个消息在用公钥加密后, 哪怕在传输中被人截获, 如果没有私钥, 是无法解密获得其内容的, 只有拥有私钥的人才能成功解密消息. 所以私钥应该由消息的接收方紧紧攥在手里, 不应让他人得知.</p>
<p>公钥加密的关键点在于，一方面，公钥加密是可逆的，但是不能用公钥推断出私钥。显然数学上，已知一个公钥是能够算出对应私钥的，但是只要设计足够好的加密算法（以及使用足够复杂的密钥对），使得不能在可以接受的时间内破译即可。</p>
<p>RSA<sup><a href="http://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95" target="_blank" rel="external">[3]</a></sup> 是一种常见的公钥加密算法。RSA 的工作原理依赖于如下事实：破译 RSA 私钥需要对某些极大的整数进行因数分解，而目前尚未找到快速的对极大整数作因数分解的算法。换言之，如果有人找到了这样的算法，那么全世界的 RSA 加密都会失效。</p>
<p>RSA是由Ron Rivest, Adi Shamir, Leonard Adleman三人在1978年首次提出的.三人并因此项工作荣获了2002年<a href="http://en.wikipedia.org/wiki/Turing_award" target="_blank" rel="external">Turing Award</a>. Rivest还是<a href="http://book.douban.com/subject/1885170/" target="_blank" rel="external">算法导论</a>的作者之一, 书中在31章对RSA系统的原理进行了简要说明, 系统实现中利用到了数论中的<a href="http://en.wikipedia.org/wiki/Euler%E2%80%93Fermat_theorem" target="_blank" rel="external">Euler-Fermat theorem</a>.<sup><a href="https://wiki.tuna.tsinghua.edu.cn/SshKeyHowto" target="_blank" rel="external">[4]</a></sup></p>
<p>一个基于RSA的<strong>公钥</strong>大概如下所示</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAvSkEZ0fKXRqQ<span class="regexp">/DkjCfsAETsQgV8OR/</span>RVQmwBk/J5IWoknf8Dr</span><br><span class="line">y5kOs+<span class="number">1</span>bnx9zaf8oIcVuXf0jRxTccLBOXiReFJE4aD2rWO33sqA0M4qP1ESYhsU4yokRA0IMDJ62JUv2cWVJg</span><br><span class="line">GpeQriol2t7mH8E6aB8OiJ+NgRbh6+<span class="regexp">/0LbtQs40VA2+W5PtaBwT4sjv9LOHIdzQcsEeCM8MIHqmXHst7/</span>JuVI</span><br><span class="line">i7wLCxB7Ur8qtwZ2/Ii8Ckjfo6mikWmSh6mRMq9qn0FkMkPCcpm8o4f1zJWOuf+RnjPpopFTqIa8JssMHJMuQ</span><br><span class="line">cCm3EHDkBHjLk/SkidWOzqOtSvUeGKieWiijuw== username<span class="annotation">@localhost</span>.localdomain</span><br></pre></td></tr></table></figure>
<p>与之配对的<strong>私钥</strong>形如</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">MIIEpAIBAAKCAQEAvSkEZ0fKXRqQ<span class="regexp">/DkjCfsAETsQgV8OR/</span>RVQmwBk/J5IWoknf8D</span><br><span class="line">ry5kOs+<span class="number">1</span>bnx9zaf8oIcVuXf0jRxTccLBOXiReFJE4aD2rWO33sqA0M4qP1ESYhsU</span><br><span class="line"><span class="number">4</span>yokRA0IMDJ62JUv2cWVJgGpeQriol2t7mH8E6aB8OiJ+NgRbh6+/<span class="number">0</span>LbtQs40VA2</span><br><span class="line">+W5PtaBwT4sjv9LOHIdzQcsEeCM8MIHqmXHst7<span class="regexp">/JuVIi7wLCxB7Ur8qtwZ2/</span>Ii8C</span><br><span class="line">kjfo6mikWmSh6mRMq9qn0FkMkPCcpm8o4f1zJWOuf+RnjPpopFTqIa8JssMHJMuQ</span><br><span class="line">cCm3EHDkBHjLk/SkidWOzqOtSvUeGKieWiijuwIBIwKCAQEAjITesx9jIJdkY5go</span><br><span class="line">qFQOrbbZD6Wy1l27ra9RoRqF3k7ZX2z7bDEXQaGcuHm8iiUEzwVDVpOfuUg9/LyP</span><br><span class="line">icdHffP4p5wk9dUMPxoWjHvk3pP/BwzNsBCtOd3LkYSVxXYji9SaroTkS0nqL3jK</span><br><span class="line">WVAaV72FGVxJPINAJer0SJgQ7OJ7f0kZJYoPwG0VpMTLOsmulH7/M5e9i+kwDLmH</span><br><span class="line">+TMvJ3y8gXjc<span class="regexp">/Sj5UqN/</span>JQIY+h07UxYGvoju<span class="regexp">/isqFHh8OmahsjJ3Nb3QsUEkC/</span>Kj</span><br><span class="line">cKG2K+mUzTe<span class="regexp">/4/</span>XQuqMadrjX82QF2b2gL+cdvUAwLn55boXmrtUzxEPo4xxiDNzY</span><br><span class="line">AbYxSwKBgQDxIkaa+EPSJXYej<span class="regexp">/5YzJLJLVsnb9ygqe/</span><span class="number">0</span>fM0x022J6Z+<span class="number">0</span>Yq9AIwJ7</span><br><span class="line">N7dvMgNSROLoJ17Oij/N7aoiAZy1KHg1vOoqx6T6BClay8I1+dOsbY6Fi0QbkZeI</span><br><span class="line">Rr6CDueq5PBR8j/oghNhQeFfJUEICBFU6Z7+uFwxuAtQqqdFHyDhSwKBgQDI0nX6</span><br><span class="line">Jz9oW+Y+dXAvhpL8Yln0R45ufiqatkTQgGbeZ70XlKeR7VzQiXecy/XDteJCMlnv</span><br><span class="line"><span class="number">4</span>BhjHL967nSAmrCza13I3eXIYxbzypeNC57bVVXM9BBTg5f4nWwTN+I8Gd/BA5Y8</span><br><span class="line">mekQPBuSyAOp7ULAecjKZrD9Jhw1vybT/aYxUQKBgQDcdxv7ZqRoXMPEK+E7PrIX</span><br><span class="line">BOWgZkYPPEkaC7RKz+<span class="number">8</span>fAXwSo15mhmirK6BlqhGqTZxB+BwqjQcirWhZmxLuxeo/</span><br><span class="line">wqo1vdiqEm7z7X5dPC8+kA1G5bqc3OJQtbV+OYNaaupZjQc6+pVgPDvEtFi24s4E</span><br><span class="line">fdMyB6S/vjY7H67gHHXVSwKBgQC3m9mUQSQHpHq8wyS9vN4olG+AQWxHw88uXYC+</span><br><span class="line">oUgbzI+gh+mp/ZawCKff0GurnvrALgkV1DON0SQYn4B1lL7P7SKLw5BCLrXmNZHg</span><br><span class="line">Cp<span class="regexp">/eeegL19RpnOK3a1t/</span>SQlbhV7cWw0ENPJX<span class="regexp">/HD7OocBwvszoouxvPmW/</span>kWte5E2</span><br></pre></td></tr></table></figure>
<p>SSH 连接是 <code>C/S</code> 模型, 客户端发出连接申请, 服务器对客户端进行验证, 再考虑是否接受连接申请.</p>
<h1>SSH具体认证过程</h1>
<p>SSH提供了两种认证的方式, 分别为:</p>
<h2 id="password认证">Password认证</h2>
<p>即账号口令验证, SSH的实现方式是,</p>
<ol>
<li>客户端向 ssh 服务器发出请求, 服务器将自己的公钥返回给客户端;</li>
<li>客户端用服务器的公钥加密自己的登录密码, 再将信息发送给服务器;</li>
<li>服务器接收到客户端传送的密码, 用自己的私钥解码, 如果结果正确, 则同意登录, 建立起连接.</li>
</ol>
<p>这种方式还是存在漏洞, 中间人可以假扮成服务器, 骗取客户端的密码.<sup><a href="http://biaobiaoqi.me/blog/2013/04/19/use-ssh/" target="_blank" rel="external">[2]</a></sup>而且在每次登陆的时候都需要输入密码, 所以一般不采用该验证方式.</p>
<h2 id="public-key认证">Public Key认证</h2>
<p>Public Key认证利用公钥私钥对进行认证, 在请求连接时不需要输入密码, 并且由于整个请求连接和通信过程全程加密, 因此安全性高.</p>
<p>SSH协议第二版中有RSA和DSA两种算法认证, 其中RSA加密验证比较常用. RSA加密验证方式，充分利用了非对称加密体系的优势，不需要在网络传输密码，完全杜绝了中间人攻击的可能。</p>
<p>认证的具体步骤如下:</p>
<h3 id="准备工作">准备工作</h3>
<ol>
<li>
<p>客户端先使用 <code>ssh-keygen</code> 命令, 生成公钥和私钥. 按照默认配置, 私钥会被保存在<code>~/.ssh/id_rsa</code> 中, 公钥则在<code>~/.ssh/id_rsa.pub</code> 中.</p>
</li>
<li>
<p>客户端通过安全的方式(一般通过scp(Secure Copy Protocol)方式或者U盘拷贝的方式)将公钥发送给服务器. 在服务器端, 将客户端发的公钥写入到<code>~/.ssh/authorized_keys</code> 文件末尾.</p>
</li>
</ol>
<p><em>(其实公钥和私钥不是必须在客户端生成, 在服务器端生成也是可以的, 在哪生成的对公钥和私钥并没有任何影响, 重要的是二者是配对的, 而准备阶段其实是要保证这么一个事实, 即服务器端握有公钥, 并在对应账户的家目录下的<code>.ssh/authorized_keys</code>文件中保存以便验证程序访问. 请求端握有私钥. 至于为什么要将公钥和私钥这么分配, 接下来将会解释.)</em></p>
<h3 id="建立连接">建立连接</h3>
<p>在建立连接的时候, 涉及到2对密钥, 其中一对为准备阶段产生并分配好的密钥对, 另一对为服务器在接收到一个连接请求时生成的密钥对. 为了讲述方便, 我们将这两组密钥对表示如下</p>
<table>
<thead>
<tr>
<th style="text-align:center">Symbol</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">PubC</td>
<td style="text-align:left">客户端密钥对应的公钥</td>
</tr>
<tr>
<td style="text-align:center">PrvC</td>
<td style="text-align:left">客户端握有的私钥</td>
</tr>
<tr>
<td style="text-align:center">PubS</td>
<td style="text-align:left">服务器端产生的公钥</td>
</tr>
<tr>
<td style="text-align:center">PrvS</td>
<td style="text-align:left">服务器端产生的私钥</td>
</tr>
</tbody>
</table>
<ol>
<li><strong>认证</strong></li>
</ol>
<p>①服务器生成随机数(称之为challenge) <code>x</code>, 并用 <code>PubC</code> 加密后生成结果 <code>s(x)</code>, 发送给客户端.</p>
<p>②客户端使用 <code>PrvC</code> 解密 <code>s(x)</code> 得到 <code>x</code>, 再将<code>x</code>用<code>PubS</code>加密发送回服务器端.</p>
<p>③服务器端使用<code>PrvS</code>解密得到<code>x</code>, 进行核对, 如果正确则链接正式成立.</p>
<ol start="2">
<li><strong>通信加密</strong></li>
</ol>
<p>在请求连接前, 服务器端和客户端拥有的密钥为</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">Server          |           Client</span><br><span class="line">--------------------------------------</span></span><br><span class="line">PubC            |            PrvC</span><br></pre></td></tr></table></figure>
<p>①客户端发出申请. 服务器会产生一组 <code>session</code> 密钥对, 即<code>PubS</code>和<code>PrvS</code>.</p>
<p>此时服务器端和客户端拥有的密钥如下所示</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">Server           |           Client</span><br><span class="line">-------------------------------------</span></span><br><span class="line">PubC             |            PrvC</span><br><span class="line">PubS             |</span><br><span class="line">PrvS             |</span><br></pre></td></tr></table></figure>
<p>②服务器端利用客户端的公钥<code>PubC</code>对 <code>session</code> 公钥PubS进行加密后发送给客户端.</p>
<p>③客户端用自己的密钥<code>PrvC</code>解密信息，得到 <code>session</code> 公钥<code>PubS</code>。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">Server           |           Client</span><br><span class="line">-------------------------------------</span></span><br><span class="line">PubC             |            PubS</span><br><span class="line">PrvS             |            PrvC</span><br><span class="line">PubS             |</span><br></pre></td></tr></table></figure>
<p>④之后的数据交互，都通过对方方公钥加密，对方收到信息后，用其私钥解密，实现安全加密过程。<sup><a href="http://biaobiaoqi.me/blog/2013/04/19/use-ssh/" target="_blank" rel="external">[2]</a><a href="http://tech.idv2.com/2006/10/21/ssh-rsa-auth/" target="_blank" rel="external">[5]</a></sup></p>
<h1>参考引用</h1>
<p>至此, 关于SSH原理性部分的讲解结束. 以下是相关的参考引用出处:</p>
<ol>
<li><a href="http://blog.csdn.net/oncoding/article/details/4365062" target="_blank" rel="external">SSH协议基础</a></li>
<li><a href="http://biaobiaoqi.me/blog/2013/04/19/use-ssh/" target="_blank" rel="external">SSH原理和使用</a></li>
<li><a href="http://zh.wikipedia.org/wiki/RSA%E5%8A%A0%E5%AF%86%E6%BC%94%E7%AE%97%E6%B3%95" target="_blank" rel="external">RSA加密算法</a></li>
<li><a href="https://wiki.tuna.tsinghua.edu.cn/SshKeyHowto" target="_blank" rel="external">使用 RSA 密钥对进行 SSH 登录验证</a></li>
<li><a href="http://tech.idv2.com/2006/10/21/ssh-rsa-auth/" target="_blank" rel="external">ssh 公钥方式认证攻略</a><br>
<a href="http://en.flossmanuals.net/circumvention-tools-zh/advanced-techniques/ssh/" target="_blank" rel="external">SSH隧道加密技术</a><br>
<a href="http://zh.wikipedia.org/wiki/MD5" target="_blank" rel="external">MD5 wikipedia</a></li>
</ol>
<p>关于SSH的具体配置以及在windows下通过SSH远程登录Linux服务器的详细操作过程请看下一篇文章<a href="">SSH配置-在Windows下远程登陆Linux服务器Shell</a>.</p>
-->
            
            
                <h1>SSH简要介绍</h1>
                
                <p class="article-more-link">
                    <a href="/2013/12/30/ssh_overview/#more">Read More</a>
                </p>
                
            
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://fancyseeker.github.io/2013/12/30/ssh_overview/" data-id="ci93spi2v0010fgdymnu2xilh" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="http://fancyseeker.github.io/2013/12/30/ssh_overview/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssh/">ssh<span class="article-tag-list-count">2</span></a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-svn" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
          <div class="article-meta">
            
            <a href="/2013/11/17/svn/" class="article-date">
  <time datetime="2013-11-17T06:03:34.000Z" itemprop="datePublished">2013-11-17</time>
</a>
            <p class="article-time">
                <a href="/2013/11/17/svn/" class="article-time">
  <time datetime="2013-11-17T06:03:34.000Z" itemprop="datePublished">14:03:34</time>
</a>

            </p>
          </div>
        
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/17/svn/">CentOS/Fedora下SVN+Apache服务器配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
       <!--<h1>SVN简介</h1>
<p>SVN是一个优秀的版本管理工具，并且适用于小型的团队开发。SVN可以独立服务器运行或者借助Apache运行，所谓独立运行是指在服务器上配置好SVN服务器后，网内的计算机可以利用诸如TortoiseSVN这样的SVN客户端软件通过SVN协议(svn://<strong><em>.</em></strong>.<strong><em>.</em></strong>)对服务器进行签出(checkout)提交(commit)等操作。若SVN借助Apache运行，则可通过浏览器的http协议直接访问服务器对应地址下的代码。</p>
<p>本文先讲述如何单独配置SVN服务器，之后再讲述如何添加Apache的http访问支持。</p>
<hr>
<h1>安装环境</h1>
<p>Fedora 19 / CentOS 6.4<br>
(Windows也可当作SVN服务器，貌似配置过程很简单，不过从稳定性上考虑，还是选用CentOS作为服务器更为理想)</p>
<hr>
<h1>SVN服务器配置</h1>
<h2 id="安装subversion包">安装subversion包</h2>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># yum install subversion</span></span><br></pre></td></tr></table></figure>
<h2 id="初始化版本仓库-repositories">初始化版本仓库(Repositories)</h2>
<p>安装完subversion后，需要初始化一个版本仓库，用于管理代码。 新建目录</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># mkdir -p /home/svn/project</span></span><br></pre></td></tr></table></figure>
<p>在新建的目录上创建仓库</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># svnadmin create /home/svn/project</span></span><br></pre></td></tr></table></figure>
<p>这里，<code>svnadmin create</code>之后跟的为版本仓库存放代码的目录地址，在本文中为 <code>/home/svn/project</code>，当然，可以根据需求改成其它目录，但请在以下的操作中根据具体目录进行对应的修改。 在执行完<code>svnadmin create</code>操作后，在创建的仓库下，会自动生成几个目录</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> /home/svn/project/</span><br><span class="line"><span class="keyword">conf</span>  <span class="keyword">db</span>  <span class="keyword">format</span>  hooks  locks  README.txt</span><br></pre></td></tr></table></figure>
<p>此时，如果你的电脑上有待进行管理的代码目录，可以将其导入(import)到SVN的仓库中。作为示例，这里要导入的代码目录为</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># svn <span class="keyword">import</span> <span class="regexp">/home/</span>chen<span class="regexp">/Lab file:/</span><span class="comment">//home/svn/project -m "初始化导入代码目录"</span></span><br></pre></td></tr></table></figure>
<p>在<code>svn import</code>命令中，末尾的<code>-m(--message)</code>选项表示为执行操作的日志消息，如果不加<code>-m</code> “消息内容”的话，此操作将会报错<code>svn: E205007</code>。<br>
如果导入成功，你将会看到诸如如下过程(此处截取了导入过程中的末尾部分)</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Adding  (bin)  <span class="regexp">/home/</span>chen<span class="regexp">/Lab/</span>IntelPerformanceCounterMonitorV2<span class="number">.4</span><span class="regexp">/PCM-Memory_Win/</span>pcm-memory-win.vcproj</span><br><span class="line">Adding         <span class="regexp">/home/</span>chen<span class="regexp">/Lab/</span>IntelPerformanceCoun(((ujterMonitorV2<span class="number">.4</span><span class="regexp">/freegetopt/</span>README</span><br><span class="line">Adding         <span class="regexp">/home/</span>chen<span class="regexp">/Lab/</span>IntelPerformanceCounterMonitorV2<span class="number">.4</span><span class="regexp">/freegetopt/</span>getopt.c</span><br><span class="line">Adding         <span class="regexp">/home/</span>chen<span class="regexp">/Lab/</span>IntelPerformanceCounterMonitorV2<span class="number">.4</span><span class="regexp">/freegetopt/</span>ChangeLog</span><br><span class="line">Adding         <span class="regexp">/home/</span>chen<span class="regexp">/Lab/</span>IntelPerformanceCounterMonitorV2<span class="number">.4</span>/.gitignore</span><br><span class="line">Adding         <span class="regexp">/home/</span>chen<span class="regexp">/Lab/</span>IntelPerformanceCounterMonitorV2<span class="number">.4</span>/FREEBSD_HOWTO.txt</span><br><span class="line"></span><br><span class="line">Committed revision <span class="number">1.</span></span><br></pre></td></tr></table></figure>
<h2 id="用户管理及权限设置">用户管理及权限设置</h2>
<p>SVN服务器的配置文件主要有3个，分别为</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/your_svn_repos/<span class="keyword">conf</span>/passwd --用户名及密码管理</span><br><span class="line">/your_svn_repos/<span class="keyword">conf</span>/authz  --权限配置</span><br><span class="line">/your_svn_repos/<span class="keyword">conf</span>/svnserve.<span class="keyword">conf</span>  --SVN全局配置文件</span><br></pre></td></tr></table></figure>
<h3 id="添加用户">添加用户</h3>
<p>添加用户只需要打开<code>/home/svn/project/conf/passwd</code>文件，添加一行形如 <code>user = password</code> 条目即可。这里，作为示例，添加一个admin账户，密码为123456，以及其它2个账户则<code>passwd</code>文件如下</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### This file is an example password file for svnserve.</span></span><br><span class="line"><span class="comment">### Its format is similar to that of svnserve.conf. As shown in the</span></span><br><span class="line"><span class="comment">### example below it contains one section labelled [users].</span></span><br><span class="line"><span class="comment">### The name and password for each user follow, one account per line.</span></span><br><span class="line"></span><br><span class="line">[users]</span><br><span class="line"><span class="comment"># harry = harryssecret</span></span><br><span class="line"><span class="comment"># sally = sallyssecret</span></span><br><span class="line"><span class="constant">admin</span> = 123456</span><br><span class="line"><span class="constant">role_a</span> = 123456</span><br><span class="line"><span class="constant">role_b</span> = 123456</span><br></pre></td></tr></table></figure>
<h3 id="用户访问策略配置">用户访问策略配置</h3>
<p><code>/home/svn/project/conf/authz</code>文件用于管理用户以及用户组的访问策略。authz文件中包含若干个节，包括<code>[groups]</code>以及类似<code>[repository:/baz/fuz]</code>这样的节，注意<code>[groups]</code>节，这里用于定义用户组，在<code>[groups]</code>节中定义完不同组的用户后可以很方便的利用组进行权限管理。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[groups]</span><br><span class="line"><span class="comment"># harry_and_sally = harry,sally</span></span><br><span class="line"><span class="comment"># harry_sally_and_joe = harry,sally,&amp;joe</span></span><br><span class="line">g_admin = admin</span><br><span class="line">g_common = role_a,role_b</span><br><span class="line"></span><br><span class="line">[/]</span><br><span class="line"><span class="comment">@g_admin = rw</span></span><br><span class="line"><span class="keyword">*</span> = </span><br><span class="line"></span><br><span class="line">[project:/]</span><br><span class="line"><span class="comment">@g_admin = rw</span></span><br><span class="line"><span class="comment">@g_common = rw</span></span><br><span class="line"><span class="keyword">*</span> =</span><br></pre></td></tr></table></figure>
<p>在以上的authz文件中，定义了组<code>g_admin</code>和<code>g_common</code>，<code>g_admin</code>组中包含有admin用户，<code>g_common</code>组中包含了用户role_a和role_b。<br>
接下来进行具体目录的权限控制，可用类似 <code>user = rw</code> 类似的方式为用户分配该目录的对应权限，也可用 <code>@groupname = rw</code> 类似的方式为用户组分配该目录的对应权限，r代表可读，w代表可写，rw代表可读可写。同时，一定要注意在末尾添加其他人的权限设置，利用 <code>*</code> 通配符代表除了之前提到的其他人。<code>* =</code> 表示其他人不具有任何权限。<br>
注意到文件中的两个节<code>[/]</code>和<code>[project:/]</code>，<code>[/]</code>表示SVN根目录的权限配置，而<code>[project:/]</code>表示库project的根目录权限配置，二者存在细微的差别，但是若没搞清楚，则会导致访问时验证失败或连接失败等问题。</p>
<h3 id="svn全局配置文件">SVN全局配置文件</h3>
<p><code>/home/svn/project/conf/subserve.conf</code>为SVN的全局配置文件，这里取消对应行的注释并指定适当的值，注意不要行前不要留空格，具体如下:</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">anon-<span class="keyword">access</span> = none   <span class="comment">--匿名用户默认情况下不具有任何权限</span></span><br><span class="line">auth-<span class="keyword">access</span> = write  <span class="comment">--授权用户具默认情况下有写权限</span></span><br><span class="line">password-db = /home/svn/project/conf/passwd  <span class="comment">--指定passwd文件所在位置</span></span><br><span class="line">authz-db = /home/svn/project/conf/authz      <span class="comment">--指定authz文件所在位置</span></span><br></pre></td></tr></table></figure>
<h2 id="启动svn服务器">启动SVN服务器</h2>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># svnserve -d -r /home/svn</span></span><br></pre></td></tr></table></figure>
<p><code>-d</code> 表示以deamon方式运行，即后台运行。 <code>-r</code>用于指定SVN服务根目录，这里我们指定的根目录为 <code>/home/svn</code>。<br>
联系到authz文件中，<code>[/]</code>节中的权限则对应 <code>/home/svn</code> 下权限，<code>[project:/]</code>节中的权限即对应 <code>/home/svn/project</code> 下的权限。但是如果指定SVN服务根目录为 <code>/home/svn/project</code>，那么authz文件中<code>[/]</code>代表目录 <code>/home/svn/project</code>，而此时<code>[project:/]</code>则没有对应目录，因为<code>/home/svn/project</code>下并没有名为project的仓库，所以就会出错。<br>
如果修改了SVN的配置文件，那么需要重启SVN服务器才能使修改生效。</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># ps -aux|grep svnserve</span></span><br><span class="line"><span class="preprocessor"># kill -9 pid_of_svnserve</span></span><br><span class="line"><span class="preprocessor"># svnserve -d -r /home/svn</span></span><br></pre></td></tr></table></figure>
<h2 id="在防火墙中开放svn端口">在防火墙中开放SVN端口</h2>
<p>如果不在防火墙中开放SVN默认端口3690，则会出现，服务器本机可以访问SVN服务，而其它网内机器无法连接SVN服务器的错误。<br>
首先关闭selinux，修改 <code>/etc/selinux/config</code> 文件</p>
<figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">SELINUX</span>=<span class="string">disabled</span></span><br></pre></td></tr></table></figure>
<p>SVN服务的默认端口为3690，设置防火墙开放3690端口</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># iptables -I INPUT -p tcp --dport 3690 -j ACCEPT</span></span><br><span class="line"><span class="preprocessor"># iptables -I OUTPUT -p tcp --sport 3690 -j ACCEPT</span></span><br><span class="line"><span class="preprocessor"># service iptables save</span></span><br><span class="line"><span class="preprocessor"># service iptables restart</span></span><br></pre></td></tr></table></figure>
<h2 id="测试svn服务器">测试SVN服务器</h2>
<p>随意找一个目录，尝试从SVN服务器签出(check out)仓库</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># svn co svn://58.154.190.***/project</span></span><br><span class="line">Authentication realm: &lt;svn://<span class="number">58.154</span><span class="number">.190</span>.***:<span class="number">3690</span>&gt; ecf95e5d-5de1-44de-91b3-f44b1bd795d1</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'root'</span>: </span><br><span class="line">Authentication realm: &lt;svn://<span class="number">58.154</span><span class="number">.190</span>.***:<span class="number">3690</span>&gt; ecf95e5d-5de1-44de-91b3-f44b1bd795d1</span><br><span class="line">Username: admin</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'admin'</span>: </span><br><span class="line"></span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">ATTENTION!  Your password <span class="keyword">for</span> authentication realm:</span><br><span class="line"></span><br><span class="line">   &lt;svn://<span class="number">58.154</span><span class="number">.190</span>.***:<span class="number">3690</span>&gt; ecf95e5d-5de1-44de-91b3-f44b1bd795d1</span><br><span class="line"></span><br><span class="line">can only be stored to disk unencrypted!  You are advised to configure</span><br><span class="line">your system so that Subversion can store passwords encrypted, <span class="keyword">if</span></span><br><span class="line">possible.  See the documentation <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">You can avoid future appearances of this <span class="keyword">warning</span> by setting the value</span><br><span class="line">of the <span class="string">'store-plaintext-passwords'</span> option to either <span class="string">'yes'</span> or <span class="string">'no'</span> <span class="keyword">in</span></span><br><span class="line"><span class="string">'/root/.subversion/servers'</span>.</span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line">Store password unencrypted (yes/no)?yes </span><br><span class="line"><span class="keyword">...</span></span><br><span class="line"><span class="keyword">...</span></span><br><span class="line">A    project/IntelPerformanceCounterMonitorV2.4/pcm3d/widget.h</span><br><span class="line">A    project/IntelPerformanceCounterMonitorV2.4/pcm-memory.cpp</span><br><span class="line">A    project/IntelPerformanceCounterMonitorV2.4/pcm-sensor.cpp</span><br><span class="line">A    project/IntelPerformanceCounterMonitorV2.4/.gitattributes</span><br><span class="line">Checked out revision <span class="number">1.</span></span><br></pre></td></tr></table></figure>
<p>在第一次签出的时候会提示是否保存明文密码(因为SVN的密码是明文保存的，所以SVN的账户安全依赖与Linux系统账户的安全)选择&quot;yes&quot;的话下次就不需要在输入密码了，反之，选择&quot;no&quot;的话下次操作还需进行身份验证。如果想换个身份操作SVN或者密码输错太多被拒绝，可以删除用户目录下的 <code>～/.subversion</code> 文件夹以清空身份信息。<br>
如果能顺利 check out revision 则表明独立SVN服务器配置已成功。<br>
这时不论是在服务器本机上还是其它客户端机器，均能使用SVN服务。对于客户端操作系统为Windows的计算机，可以安装TortoiseSVN进行相应的客户端操作。</p>
<hr>
<h1>为SVN服务器添加HTTP支持</h1>
<p>经过上面的配置过程后，SVN服务器已经可以正常使用，但是，只能通过SVN协议，无法通过http协议访问。为SVN服务器添加HTTP支持可以使得用户能用浏览器通过HTTP协议直接查看仓库内容，同时也可以在代码签出提交时使用HTTP协议。</p>
<h2 id="安装必要包">安装必要包</h2>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd mod_dav_svn mod_perl  <span class="keyword">perl</span>* ntsysv <span class="keyword">vim</span>-enhanced</span><br></pre></td></tr></table></figure>
<h2 id="转换svn明文密码为http要求的加密格式">转换SVN明文密码为HTTP要求的加密格式</h2>
<p>SVN的密码是明文保存的，而http服务器不支持明文密码，所以需要将SVN服务的明文密码转换为http要求的加密格式，可以通过以下的perl脚本完成：<br>
移动到 <code>/home/svn/project/conf</code> 目录下，新建并编辑perl脚本 <code>PtoWP.pl</code>  (此脚本的作者为ha97)</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> /home/svn/project/<span class="keyword">conf</span>/</span><br><span class="line">vim PtoWP.<span class="keyword">pl</span></span><br></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/perl</span></span><br><span class="line"><span class="keyword">use</span> warnings;</span><br><span class="line"><span class="keyword">use</span> strict;</span><br><span class="line"></span><br><span class="line"><span class="comment">#open the svn passwd file</span></span><br><span class="line"><span class="keyword">open</span> (FILE, <span class="string">"passwd"</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">"Cannot open the passwd file!!!n"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#clear the apache passwd file</span></span><br><span class="line"><span class="keyword">open</span> (OUT_FILE, <span class="string">"&gt;webpasswd"</span>) <span class="keyword">or</span> <span class="keyword">die</span> (<span class="string">"Cannot open the webpasswd file!!!n"</span>);</span><br><span class="line"><span class="keyword">close</span> (OUT_FILE);</span><br><span class="line"></span><br><span class="line"><span class="comment">#begin</span></span><br><span class="line"><span class="keyword">foreach</span> () &#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_</span> =~ <span class="regexp">m/^[^#].*=/</span>) &#123;</span><br><span class="line"><span class="variable">$_</span> =~ <span class="regexp">s/=//</span>;</span><br><span class="line"><span class="string">`htpasswd -b webpasswd $_`</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为脚本添加可执行属性</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># chmod +x PtoWP.pl</span></span><br></pre></td></tr></table></figure>
<p>在目录 <code>/home/svn/project/conf/passwd</code> 所在目录中运行<code>PtoWP.pl</code>脚本，对passwd文件进行转换</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># ./PtoWP.pl</span></span><br></pre></td></tr></table></figure>
<p>转换过程如下</p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">Adding</span> <span class="literal">password</span> for <span class="keyword">user</span> admin</span><br><span class="line"><span class="constant">Adding</span> <span class="literal">password</span> for <span class="keyword">user</span> role_a</span><br><span class="line"><span class="constant">Adding</span> <span class="literal">password</span> for <span class="keyword">user</span> role_b</span><br></pre></td></tr></table></figure>
<p>转换完成后目录下会出现一个 <code>webpasswd</code> 文件，即为http支持的密码文件。</p>
<h2 id="修改http-conf-使得http支持svn">修改http.conf，使得http支持SVN</h2>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> /etc/httpd/<span class="keyword">conf</span>/httpd.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure>
<p>在<code>httpd.conf</code>文件的最后添加如下信息</p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务模块</span></span><br><span class="line"><span class="constant">D</span>AV svn</span><br><span class="line"><span class="comment"># SVN仓库根目录</span></span><br><span class="line"><span class="constant">S</span>VNPath /<span class="literal">home</span>/svn/<span class="literal">project</span>/</span><br><span class="line"><span class="comment"># 授权方式,这里配置为基本授权方式</span></span><br><span class="line"><span class="constant">Auth</span>Type <span class="constant">Basic</span></span><br><span class="line"><span class="comment"># 授权名</span></span><br><span class="line"><span class="constant">Auth</span>Name <span class="string">"svn for project"</span></span><br><span class="line"><span class="comment"># 用户名及用户密码文件</span></span><br><span class="line"><span class="constant">Auth</span>UserFile /<span class="literal">home</span>/svn/<span class="literal">project</span>/conf/webpasswd</span><br><span class="line"><span class="comment"># 访问权限配置文件</span></span><br><span class="line"><span class="constant">Authz</span>SVNAccessFile /<span class="literal">home</span>/svn/<span class="literal">project</span>/conf/authz</span><br><span class="line"><span class="constant">Satisfy</span> all</span><br><span class="line"><span class="comment"># 访问方式，这里配置为必须输入账户密码</span></span><br><span class="line"><span class="constant">Require</span> valid-<span class="keyword">user</span></span><br></pre></td></tr></table></figure>
<p>看了不少文章，有部分文章说在这里还需添加两个模块的语句，另外还需要 <code>yum install subversion-deps-*</code> 包来使得svn得到http的支持。</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword"><span class="common">LoadModule</span></span> dav_svn_module modules/mod_dav_svn.so</span><br><span class="line"><span class="keyword"><span class="common">LoadModule</span></span> authz_svn_module modules/mod_authz_svn.so</span><br></pre></td></tr></table></figure>
<p>但是，根据官方的说明(Please note that the dependencies distribution subversion-deps-* is no longer available in 1.7 and later.)也就是说在1.7以及1.7之后的版本中不需要安装依赖的<code>subversion-deps-*</code>包，而本人实验证明，也不需要在<code>httpd.conf</code>文件中添加上述两行加载模块的语句。</p>
<p>修改SVN主目录的所有者和所属组为Apache</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># chown -R apache.apache <span class="regexp">/home/</span>svn<span class="regexp">/project/</span></span><br></pre></td></tr></table></figure>
<h2 id="在防火墙中开放httpd服务的80端口">在防火墙中开放httpd服务的80端口</h2>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># iptables -I INPUT -p tcp --dport 80 -j ACCEPT</span></span><br><span class="line"><span class="preprocessor"># iptables -I OUTPUT -p tcp --sport 80 -j ACCEPT</span></span><br><span class="line"><span class="preprocessor"># service iptables save</span></span><br><span class="line"><span class="preprocessor"># service iptables restart</span></span><br></pre></td></tr></table></figure>
<p>如果不在防火墙中开放80端口，则会出前客户机无法通过http协议连接SVN服务器的情况。<br>
<strong>注:</strong> 关于服务重启命令，在fedora 19中采用的是systemctl restart service_name.service形式。</p>
<h2 id="重启httpd服务">重启httpd服务</h2>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># service httpd restart</span></span><br></pre></td></tr></table></figure>
<h2 id="通过浏览器测试">通过浏览器测试</h2>
<p>在浏览器地址栏输入 <code>http://your_svn_server_ip/project</code>，在弹出的身份确认框中输入用户名密码，能通过浏览器查看SVN仓库。<br>
同时可以通过http协议执行svn操作</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ svn co <span class="string">http:</span><span class="comment">//your_svn_server_ip/project</span></span><br><span class="line">Authentication <span class="string">realm:</span> &lt;<span class="string">http:</span><span class="comment">//58.154.190.***:80&gt; svn for project</span></span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'chen'</span>: </span><br><span class="line">Authentication <span class="string">realm:</span> &lt;<span class="string">http:</span><span class="comment">//58.154.190.***:80&gt; svn for project</span></span><br><span class="line"><span class="string">Username:</span> admin</span><br><span class="line">Password <span class="keyword">for</span> <span class="string">'admin'</span>:</span><br></pre></td></tr></table></figure>
<h1>参考资料</h1>
<p><a href="http://www.ha97.com/4467.html" target="_blank" rel="external">（总结）CentOS Linux搭建SVN Server配置详解</a></p>
-->
            
            
                <h1>SVN简介</h1>
                
                <p class="article-more-link">
                    <a href="/2013/11/17/svn/#more">Read More</a>
                </p>
                
            
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://fancyseeker.github.io/2013/11/17/svn/" data-id="ci93spi2o000lfgdycj695ewh" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="http://fancyseeker.github.io/2013/11/17/svn/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS<span class="article-tag-list-count">2</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Fedora/">Fedora<span class="article-tag-list-count">3</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux<span class="article-tag-list-count">3</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SVN/">SVN<span class="article-tag-list-count">1</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/apache/">apache<span class="article-tag-list-count">1</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maintenance/">maintenance<span class="article-tag-list-count">3</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/server/">server<span class="article-tag-list-count">1</span></a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-forwhat" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
          <div class="article-meta">
            
            <a href="/2013/03/25/forwhat/" class="article-date">
  <time datetime="2013-03-25T08:18:51.000Z" itemprop="datePublished">2013-03-25</time>
</a>
            <p class="article-time">
                <a href="/2013/03/25/forwhat/" class="article-time">
  <time datetime="2013-03-25T08:18:51.000Z" itemprop="datePublished">16:18:51</time>
</a>

            </p>
          </div>
        
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/03/25/forwhat/">为了什么而生活</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
       <!--<p><img src="/img/forwhat/heaven_or_hell.jpg" alt="heaven or hell"></p>
<p>又是一个周末的黄昏,独坐在宿舍里,窗外篮球场上的喧嚣一刻也未停息,挠的人不免有些心烦. 觉得要做点什么,却又什么都不想做,而当什么都不做的时候,心里又就冒出一股强烈的力量迫使自己去做点什么来解除这种无所事事的状态,这或许就是本能在驱使着自己不要浪费时光吧.而当人在这种矛盾中纠结的时候,常常嘴里会蹦出&quot;无聊啊&quot;这类的词语.</p>
<p>其实,一个人的无聊不足为惧,因为这种无聊的感觉很快会随着时间消散,通常只要睡一觉的功夫,伴随着体力的回复,人马上又会重新找到做些事情的兴趣.但是,如果是一群人一起无聊,那情况就会变得复杂很多.这种情况我想在目前的大学校园是很多见的吧,尤其是在大四即将毕业的男生宿舍里.大家都没事可做,于是相互抱怨着无聊,而当一个无所事事的人向另一个无所事事的人倾诉自己是多么无聊的时候,通常对方也会非常消极的认同,从结果上来看,这种互相抱怨非但没有减轻这种状态的影响,反而是以近乎指数级的速度加剧了这种负面状态.</p>
<p>当一群人都处于无聊或者无所事事状态的时候,人们就会变得很随便.这种时候只要有一个人提出了一个想法,典型的比如玩游戏,或者出去吃个饭,通常会得到大家的一致同意,但是做这些事情却无法减轻无聊所带来影响,反而会慢性的加剧这个过程,等到下一个无聊周期来到的时候,常常会反应的更加剧烈.那么,我们假设一下提建议的是个比较积极乐观的人,他提出了一个某种程度上有意义的活动,比如说大家一起上图书馆或者一起出去运动一下,但是,就一般情况而言,这种情况通常不会得到大多数无聊患者的认同.因为大家之所以无聊,不是因为真的没事可做,只是因为不想去做那些该做的却看似麻烦的事情,其原因就在于人们并不是通过去直面问题本身而是通过一种逃避的方式来规避问题.</p>
<p>很不巧的,我现在就处在这种尴尬的情景之中.不过随手写写也着实减轻了我不少的负面情绪,至少,我有事情做了啊!但是,仔细想想,为什么我会觉得无聊,写博文真的是我想做的事情吗?其实,我写博文也只是在减轻无聊带来的影响而已,如果把无聊的状态定义为bad,那么,有事情做只能定义为not bad,而真正该做的或者说让人充满活力的事情则才能称之为good.由此看来,我依然没有直面问题的根源.一时间,我不知道如何去面对这样日复一日,毫无生机的生活.</p>
<p>生活是什么样的?我希望的生活又是什么样的?每一天,每一天,我看着同样的风景,面对熟悉的人群,做着机械性的事物.如同一台被设定好了的机器,不停的空转,却没有任何产出,这样的生活毫无乐趣可言.当我深深的意识到这种情况时,我就明白,it is time to change something 了.</p>
<p>我想从原来的生活轨迹中抽离出来,出个远门,感受一下冬日里温暖的阳光;去趟图书馆,静静的看一下午闲书;想一些荒诞的点子,然后去尝试实现.或许生活就应该是这样子,走出自己的牢笼,看不同的风景,邂逅不同的人,做有意思的事.然后,从一点一点开始积累,让生活呈现不一样的姿态,让自己收获不同的心情.以一颗充满活力的心去迎接,去体会每一天.简单纯粹,不为了生活而生活,而是为了发现更多…</p>
-->
            
            
                <p><img src="/img/forwhat/heaven_or_hell.jpg" alt="heaven or hell"></p>
                
                <p class="article-more-link">
                    <a href="/2013/03/25/forwhat/#more">Read More</a>
                </p>
                
            
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://fancyseeker.github.io/2013/03/25/forwhat/" data-id="ci93spi34001yfgdyah53geg0" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="http://fancyseeker.github.io/2013/03/25/forwhat/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/life/">life<span class="article-tag-list-count">1</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thought/">thought<span class="article-tag-list-count">2</span></a></li></ul>


    </footer>
  </div>
  
</article>



  
    <article id="post-f17bg" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
          <div class="article-meta">
            
            <a href="/2013/02/20/f17bg/" class="article-date">
  <time datetime="2013-02-20T08:27:12.000Z" itemprop="datePublished">2013-02-20</time>
</a>
            <p class="article-time">
                <a href="/2013/02/20/f17bg/" class="article-time">
  <time datetime="2013-02-20T08:27:12.000Z" itemprop="datePublished">16:27:12</time>
</a>

            </p>
          </div>
        
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/02/20/f17bg/">fedora 17 更换登陆背景图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
       <!--<p>新年各种繁琐的事情解决完，终于能有点时间折腾下电脑了。自从装完fedora 17后一直感觉fedora 17登陆界面的背景不怎么好看，遂换之。本文仅作备忘使用。</p>
<p><img src="/img/f17bg/beefy-miracle.png" alt="Beefy Miracle 默认背景图片"></p>
<h1>切换至root</h1>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>su -</span><br></pre></td></tr></table></figure>
<h1>切换至背景配置目录下</h1>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cd <span class="regexp">/usr/</span>share<span class="regexp">/backgrounds/</span>beefy-miracle<span class="regexp">/default/</span></span><br></pre></td></tr></table></figure>
<p>注意路径中的<code>beefy-miracle</code>为fedora 17的代号，如果fedora的版本为15那么代号就为<code>Lovelock</code>，16的话就是<code>Verne</code>，根据自己的fedora版本而定。<br>
有关fedora各版本的代号参见：<a href="http://zh.wikipedia.org/wiki/Fedora" target="_blank" rel="external"></a> 中 <code>发布历史</code> 一节。</p>
<p>在<code>default</code>目录下，我们可以发现有一个<code>beefy-miracle.xml</code>文件和<code>normalish</code>, <code>standard</code>, <code>wide</code> 三个文件夹。</p>
<p><img src="/img/f17bg/bmbg.png" alt="default目录"></p>
<p>此处的<code>beefy-miracle.xml</code>文件记录了背景图片的配置信息。我们可以打开看一下里面的内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Wide <span class="number">16</span>:<span class="number">10</span> --&gt;</span><br><span class="line">/usr/share/backgrounds/beefy-miracle/default/wide/my_wallpaper.jpg</span><br><span class="line">&lt;!-- Standard <span class="number">4</span>:<span class="number">3</span> --&gt;</span><br><span class="line">/usr/share/backgrounds/beefy-miracle/default/standard/beefy-miracle.png</span><br><span class="line">&lt;!-- Normalish <span class="number">5</span>:<span class="number">4</span> --&gt;</span><br><span class="line">/usr/share/backgrounds/beefy-miracle/default/normalish/beefy-miracle.png</span><br></pre></td></tr></table></figure>
<p>这里我们主要关注下<code>file</code>标签内的内容。可以清楚的看到, <code>size</code> 标签内的指定了不同屏幕长宽比下的背景图片的路径。</p>
<p><code>wide</code>文件夹下的背景图像为16:10的, <code>standard</code>文件夹下为4:3的, <code>normalish</code>文件夹下为5:4 的。(等等，好像缺了点什么，16:9的到哪去了，我的笔记本是16:9的啊，这不科学= =)<br>
那么，如果长宽比是16:9的同学，先暂且把16:9和16:10看成一样的吧，因为它们都是<code>wide</code>的嘛 :-D</p>
<h1>替换背景图片</h1>
<p>接下来思路就很清晰了，我们只要把对应文件夹下的图片替换成我们自定义的图片或者更改<code>beefy-miracle.xml</code>文件中对应的路径即可。</p>
<p>由于本人的屏幕长宽比为16:9，所以我选了一张个人认为还算好看的16:9壁纸，将其放到 <code>/usr/share/backgrounds/beefy-miracle/default/wide/</code>目录下，并命名为<code>my_wallpaper.jgp</code>(对，你没有看错，jpg文件也是可以的！) 然后再将<code>beefy-miracle.xml</code>文件中对应的路径作如下修改：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>share<span class="regexp">/backgrounds/</span>beefy-miracle<span class="regexp">/default/</span>wide<span class="regexp">/my_wallpaper.jpg</span></span><br></pre></td></tr></table></figure>
<h1>重启X Windows</h1>
<p>按<code>Ctrl + Alt + Backspace</code>重启 X Window，即可看到新的登陆背景啦～</p>
<p>最后，贴一下我的登陆背景图片作为本文结尾吧～</p>
<p><img src="/img/f17bg/my_wallpaper.jpg" alt=""></p>
<p>(此壁纸来源于国外壁纸网站: <s><a href="http://wallbase.cc" target="_blank" rel="external">http://wallbase.cc</a></s>(wallbase已经停止服务) <a href="http://alpha.wallhaven.cc" target="_blank" rel="external">http://alpha.wallhaven.cc</a> 个人认为是个相当不错的壁纸网站，推荐之)</p>
-->
            
            
                <p>新年各种繁琐的事情解决完，终于能有点时间折腾下电脑了。自从装完fedora 17后一直感觉fedora 17登陆界面的背景不怎么好看，遂换之。本文仅作备忘使用。</p>
                
                <p class="article-more-link">
                    <a href="/2013/02/20/f17bg/#more">Read More</a>
                </p>
                
            
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://fancyseeker.github.io/2013/02/20/f17bg/" data-id="ci93spi360023fgdyfcbzohlh" class="article-share-link" data-share="baidu">分享到</a>
      

      
        <a href="http://fancyseeker.github.io/2013/02/20/f17bg/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Fedora/">Fedora<span class="article-tag-list-count">3</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux<span class="article-tag-list-count">3</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gnome/">gnome<span class="article-tag-list-count">1</span></a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maintenance/">maintenance<span class="article-tag-list-count">3</span></a></li></ul>


    </footer>
  </div>
  
</article>



  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</section>
      
      <aside id="sidebar">
    
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/04/10/test-markdown-it/">test markdown it</a>
          </li>
        
          <li>
            <a href="/2015/04/08/wordpress2hexo/">正式完成从Wordpress迁移至Hexo</a>
          </li>
        
          <li>
            <a href="/2014/06/16/nfs_xen/">利用NFS在Xen中设立共享文件夹</a>
          </li>
        
          <li>
            <a href="/2014/05/16/vim2/">Vim(2) -- Vim插件介绍及配置</a>
          </li>
        
          <li>
            <a href="/2014/05/15/vim1/">Vim(1) -- 认识Vim</a>
          </li>
        
      </ul>
    </div>
  </div>

    
    
    
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
        <ul class="wtag-list"><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/ASUS/">ASUS<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/CentOS/">CentOS<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/Fedora/">Fedora<span class="wtag-list-count">3</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/Linux/">Linux<span class="wtag-list-count">3</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/N61ja/">N61ja<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/NFS/">NFS<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/PuTTY/">PuTTY<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/SVN/">SVN<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/Virtualization/">Virtualization<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/Xen/">Xen<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/apache/">apache<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/big-data/">big data<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/blog/">blog<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/cloud-computing/">cloud computing<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/conference/">conference<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/gnome/">gnome<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/google/">google<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/laptop-cleaning/">laptop cleaning<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/life/">life<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/maintenance/">maintenance<span class="wtag-list-count">3</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/mobile/">mobile<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/repo/">repo<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/search-engine/">search engine<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/server/">server<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/shell/">shell<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/ssh/">ssh<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/thought/">thought<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/trick/">trick<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/vim/">vim<span class="wtag-list-count">2</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/web/">web<span class="wtag-list-count">1</span></a></li><li class="wtag-list-item"><a class="wtag-list-link" href="/tags/yum/">yum<span class="wtag-list-count">1</span></a></li></ul>
    </div>
  </div>


    
</aside>

      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 fancyseeker<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Based on <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>

  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"fancyseeker"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"/css/bdshare.css"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js" type="text/javascript"></script>

</div>
</body>
</html>

